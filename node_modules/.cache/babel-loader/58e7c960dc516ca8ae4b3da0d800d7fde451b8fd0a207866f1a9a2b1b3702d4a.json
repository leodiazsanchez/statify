{"ast":null,"code":"import { redirectToAuthCodeFlow, getAccessToken } from \"./authCodeWithPkce\";\nconst clientId = \"e5f9bfa9d40447488e4fc74d2c71d293\";\nconst params = new URLSearchParams(window.location.search);\nconst code = params.get(\"code\");\nexport async function auth() {\n  if (!code) {\n    redirectToAuthCodeFlow(clientId);\n  } else {\n    const accessToken = await getAccessToken(clientId, code);\n    const profile = await fetchProfile(accessToken);\n    populateUI(profile);\n  }\n}\nasync function fetchProfile(code) {\n  const result = await fetch(\"https://api.spotify.com/v1/me\", {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${code}`\n    }\n  });\n  return await result.json();\n}\nfunction populateUI(profile) {\n  document.getElementById(\"displayName\").innerText = profile.display_name;\n  document.getElementById(\"avatar\").setAttribute(\"src\", profile.images[0].url);\n  document.getElementById(\"id\").innerText = profile.id;\n  document.getElementById(\"email\").innerText = profile.email;\n  document.getElementById(\"uri\").innerText = profile.uri;\n  document.getElementById(\"uri\").setAttribute(\"href\", profile.external_urls.spotify);\n  document.getElementById(\"url\").innerText = profile.href;\n  document.getElementById(\"url\").setAttribute(\"href\", profile.href);\n  document.getElementById(\"imgUrl\").innerText = profile.images[0].url;\n}","map":{"version":3,"names":["redirectToAuthCodeFlow","getAccessToken","clientId","params","URLSearchParams","window","location","search","code","get","auth","accessToken","profile","fetchProfile","populateUI","result","fetch","method","headers","Authorization","json","document","getElementById","innerText","display_name","setAttribute","images","url","id","email","uri","external_urls","spotify","href"],"sources":["C:/Users/Leo/Documents/learningts/my-app/src/scripts/auth.ts"],"sourcesContent":["import { redirectToAuthCodeFlow, getAccessToken } from \"./authCodeWithPkce\";\r\n\r\nconst clientId = \"e5f9bfa9d40447488e4fc74d2c71d293\";\r\nconst params = new URLSearchParams(window.location.search);\r\nconst code = params.get(\"code\");\r\n\r\nexport async function auth() {\r\n  if (!code) {\r\n    redirectToAuthCodeFlow(clientId);\r\n  } else {\r\n    const accessToken = await getAccessToken(clientId, code);\r\n    const profile = await fetchProfile(accessToken);\r\n    populateUI(profile);\r\n  }\r\n}\r\n\r\nasync function fetchProfile(code: string): Promise<UserProfile> {\r\n  const result = await fetch(\"https://api.spotify.com/v1/me\", {\r\n    method: \"GET\",\r\n    headers: { Authorization: `Bearer ${code}` },\r\n  });\r\n\r\n  return await result.json();\r\n}\r\n\r\nfunction populateUI(profile: UserProfile) {\r\n  document.getElementById(\"displayName\")!.innerText = profile.display_name;\r\n  document.getElementById(\"avatar\")!.setAttribute(\"src\", profile.images[0].url);\r\n  document.getElementById(\"id\")!.innerText = profile.id;\r\n  document.getElementById(\"email\")!.innerText = profile.email;\r\n  document.getElementById(\"uri\")!.innerText = profile.uri;\r\n  document\r\n    .getElementById(\"uri\")!\r\n    .setAttribute(\"href\", profile.external_urls.spotify);\r\n  document.getElementById(\"url\")!.innerText = profile.href;\r\n  document.getElementById(\"url\")!.setAttribute(\"href\", profile.href);\r\n  document.getElementById(\"imgUrl\")!.innerText = profile.images[0].url;\r\n}\r\n"],"mappings":"AAAA,SAASA,sBAAsB,EAAEC,cAAc,QAAQ,oBAAoB;AAE3E,MAAMC,QAAQ,GAAG,kCAAkC;AACnD,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;AAC1D,MAAMC,IAAI,GAAGL,MAAM,CAACM,GAAG,CAAC,MAAM,CAAC;AAE/B,OAAO,eAAeC,IAAIA,CAAA,EAAG;EAC3B,IAAI,CAACF,IAAI,EAAE;IACTR,sBAAsB,CAACE,QAAQ,CAAC;EAClC,CAAC,MAAM;IACL,MAAMS,WAAW,GAAG,MAAMV,cAAc,CAACC,QAAQ,EAAEM,IAAI,CAAC;IACxD,MAAMI,OAAO,GAAG,MAAMC,YAAY,CAACF,WAAW,CAAC;IAC/CG,UAAU,CAACF,OAAO,CAAC;EACrB;AACF;AAEA,eAAeC,YAAYA,CAACL,IAAY,EAAwB;EAC9D,MAAMO,MAAM,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAE;IAC1DC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUX,IAAI;IAAG;EAC7C,CAAC,CAAC;EAEF,OAAO,MAAMO,MAAM,CAACK,IAAI,CAAC,CAAC;AAC5B;AAEA,SAASN,UAAUA,CAACF,OAAoB,EAAE;EACxCS,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAAEC,SAAS,GAAGX,OAAO,CAACY,YAAY;EACxEH,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAAEG,YAAY,CAAC,KAAK,EAAEb,OAAO,CAACc,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC;EAC7EN,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC,CAAEC,SAAS,GAAGX,OAAO,CAACgB,EAAE;EACrDP,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAAEC,SAAS,GAAGX,OAAO,CAACiB,KAAK;EAC3DR,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAAEC,SAAS,GAAGX,OAAO,CAACkB,GAAG;EACvDT,QAAQ,CACLC,cAAc,CAAC,KAAK,CAAC,CACrBG,YAAY,CAAC,MAAM,EAAEb,OAAO,CAACmB,aAAa,CAACC,OAAO,CAAC;EACtDX,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAAEC,SAAS,GAAGX,OAAO,CAACqB,IAAI;EACxDZ,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAAEG,YAAY,CAAC,MAAM,EAAEb,OAAO,CAACqB,IAAI,CAAC;EAClEZ,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAAEC,SAAS,GAAGX,OAAO,CAACc,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG;AACtE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}