{"ast":null,"code":"export async function fetchProfile(code) {\n  const result = await fetch(\"https://api.spotify.com/v1/me\", {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${code}`\n    }\n  });\n  return await result.json();\n}\nexport async function fetchArtists(code) {\n  const terms = [\"long_term\", \"medium-term\", \"short-term\"];\n  const result = await fetch(`https://api.spotify.com/v1/me/top/artists/${terms[1]}`, {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${code}`\n    }\n  });\n  return await result.json();\n}\nexport async function fetchTracks(code) {\n  const result = await fetch(\"https://api.spotify.com/v1/me/top/tracks\", {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${code}`\n    }\n  });\n  return await result.json();\n}\nexport async function fetchRecommendations(code) {\n  const artists = await fetchArtists(code);\n  const artistIds = artists.items.slice(0, 2).map(artist => artist.id);\n  const seed_artists = artistIds.join(',');\n  const tracks = await fetchTracks(code);\n  const randomIndex = Math.floor(Math.random() * 20);\n  const seed_track = tracks.items[randomIndex].id;\n  const result = await fetch(`https://api.spotify.com/v1/recommendations?seed_artists=${seed_artists}&seed_genres=latino%2Chouse&seed_tracks=${seed_track}`, {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${code}`\n    }\n  });\n  return await result.json();\n}","map":{"version":3,"names":["fetchProfile","code","result","fetch","method","headers","Authorization","json","fetchArtists","terms","fetchTracks","fetchRecommendations","artists","artistIds","items","slice","map","artist","id","seed_artists","join","tracks","randomIndex","Math","floor","random","seed_track"],"sources":["C:/Users/Leo/Documents/learningts/my-app/src/scripts/APIscript.ts"],"sourcesContent":["\r\nexport async function fetchProfile(code: string): Promise<UserProfile> {\r\n  const result = await fetch(\"https://api.spotify.com/v1/me\", {\r\n    method: \"GET\",\r\n    headers: { Authorization: `Bearer ${code}` },\r\n  });\r\n\r\n  return await result.json();\r\n}\r\n\r\nexport async function fetchArtists(code: string): Promise<any> {\r\n  const terms = [\"long_term\", \"medium-term\", \"short-term\"]\r\n  const result = await fetch(`https://api.spotify.com/v1/me/top/artists/${terms[1]}`, {\r\n    method: \"GET\",\r\n    headers: { Authorization: `Bearer ${code}` },\r\n  });\r\n\r\n  return await result.json();\r\n}\r\n\r\nexport async function fetchTracks(code: string): Promise<any> {\r\n  const result = await fetch(\"https://api.spotify.com/v1/me/top/tracks\", {\r\n    method: \"GET\",\r\n    headers: { Authorization: `Bearer ${code}` },\r\n  });\r\n\r\n  return await result.json();\r\n}\r\n\r\nexport async function fetchRecommendations(code: string): Promise<any> {\r\n  \r\n  const artists = await (fetchArtists(code));\r\n  const artistIds = artists.items.slice(0, 2).map((artist: any) => artist.id);\r\n  const seed_artists = artistIds.join(',');\r\n\r\n  const tracks = await (fetchTracks(code));\r\n  const randomIndex = Math.floor(Math.random() * 20); \r\n  const seed_track = tracks.items[randomIndex].id;\r\n\r\n\r\n  const result = await fetch(`https://api.spotify.com/v1/recommendations?seed_artists=${seed_artists}&seed_genres=latino%2Chouse&seed_tracks=${seed_track}`, {\r\n    method: \"GET\",\r\n    headers: { Authorization: `Bearer ${code}` },\r\n  });\r\n\r\n  return await result.json();\r\n}"],"mappings":"AACA,OAAO,eAAeA,YAAYA,CAACC,IAAY,EAAwB;EACrE,MAAMC,MAAM,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAE;IAC1DC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUL,IAAI;IAAG;EAC7C,CAAC,CAAC;EAEF,OAAO,MAAMC,MAAM,CAACK,IAAI,CAAC,CAAC;AAC5B;AAEA,OAAO,eAAeC,YAAYA,CAACP,IAAY,EAAgB;EAC7D,MAAMQ,KAAK,GAAG,CAAC,WAAW,EAAE,aAAa,EAAE,YAAY,CAAC;EACxD,MAAMP,MAAM,GAAG,MAAMC,KAAK,CAAC,6CAA6CM,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE;IAClFL,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUL,IAAI;IAAG;EAC7C,CAAC,CAAC;EAEF,OAAO,MAAMC,MAAM,CAACK,IAAI,CAAC,CAAC;AAC5B;AAEA,OAAO,eAAeG,WAAWA,CAACT,IAAY,EAAgB;EAC5D,MAAMC,MAAM,GAAG,MAAMC,KAAK,CAAC,0CAA0C,EAAE;IACrEC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUL,IAAI;IAAG;EAC7C,CAAC,CAAC;EAEF,OAAO,MAAMC,MAAM,CAACK,IAAI,CAAC,CAAC;AAC5B;AAEA,OAAO,eAAeI,oBAAoBA,CAACV,IAAY,EAAgB;EAErE,MAAMW,OAAO,GAAG,MAAOJ,YAAY,CAACP,IAAI,CAAE;EAC1C,MAAMY,SAAS,GAAGD,OAAO,CAACE,KAAK,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,GAAG,CAAEC,MAAW,IAAKA,MAAM,CAACC,EAAE,CAAC;EAC3E,MAAMC,YAAY,GAAGN,SAAS,CAACO,IAAI,CAAC,GAAG,CAAC;EAExC,MAAMC,MAAM,GAAG,MAAOX,WAAW,CAACT,IAAI,CAAE;EACxC,MAAMqB,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC;EAClD,MAAMC,UAAU,GAAGL,MAAM,CAACP,KAAK,CAACQ,WAAW,CAAC,CAACJ,EAAE;EAG/C,MAAMhB,MAAM,GAAG,MAAMC,KAAK,CAAC,2DAA2DgB,YAAY,2CAA2CO,UAAU,EAAE,EAAE;IACzJtB,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUL,IAAI;IAAG;EAC7C,CAAC,CAAC;EAEF,OAAO,MAAMC,MAAM,CAACK,IAAI,CAAC,CAAC;AAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}